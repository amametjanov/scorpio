<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>PIO: pio_darray.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PIO
   &#160;<span id="projectnumber">2.0.28</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>PIO&#160;User's&#160;Guide</span></a></li>
      <li><a href="annotated.html"><span>Appendix</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_43d99ce78fde0129422a9159c5186d57.html">ParallelIO</a></li><li class="navelem"><a class="el" href="dir_141a8219d9000c6e4137175db07b6601.html">src</a></li><li class="navelem"><a class="el" href="dir_f00dc8b6574f3e86f0c5dc7c00a526e4.html">clib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">pio_darray.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Public functions that read and write distributed arrays in PIO.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;config.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="pio_8h_source.html">pio.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="pio__internal_8h_source.html">pio_internal.h</a>&gt;</code><br/>
<code>#include &quot;pio_sdecomps_regex.h&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for pio_darray.c:</div>
<div class="dyncontent">
<div class="center"><img src="pio__darray_8c__incl.png" border="0" usemap="#pio__darray_8c" alt=""/></div>
<map name="pio__darray_8c" id="pio__darray_8c">
<area shape="rect" id="node3" href="pio_8h.html" title="Public headers for the PIO C interface. " alt="" coords="191,155,241,181"/><area shape="rect" id="node9" href="pio__internal_8h.html" title="Private headers and defines for the PIO C interface. " alt="" coords="292,80,391,107"/><area shape="rect" id="node14" href="pio__sdecomps__regex_8h_source.html" title="pio_sdecomps_regex.h" alt="" coords="415,80,571,107"/><area shape="rect" id="node10" href="bget_8h_source.html" title="bget.h" alt="" coords="265,155,323,181"/></map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a3cbe4eaef9f3dd377fc4ddff08c32d02"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3cbe4eaef9f3dd377fc4ddff08c32d02"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DARRAY_FILL</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a3cbe4eaef9f3dd377fc4ddff08c32d02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39e0b8106c05983fec7d71c188bc5cbc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a39e0b8106c05983fec7d71c188bc5cbc"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DARRAY_DATA</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a39e0b8106c05983fec7d71c188bc5cbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a391b1ef1811260306b599b5bcc680a52"><td class="memItemLeft" align="right" valign="top">PIO_Offset&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio__darray_8c.html#a391b1ef1811260306b599b5bcc680a52">PIOc_set_buffer_size_limit</a> (PIO_Offset limit)</td></tr>
<tr class="memdesc:a391b1ef1811260306b599b5bcc680a52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the PIO IO node data buffer size limit.  <a href="#a391b1ef1811260306b599b5bcc680a52">More...</a><br/></td></tr>
<tr class="separator:a391b1ef1811260306b599b5bcc680a52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e6611243431101939c4dd4c991a7e0b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio__darray_8c.html#a8e6611243431101939c4dd4c991a7e0b">PIOc_write_darray_multi</a> (int ncid, const int *varids, int ioid, int nvars, PIO_Offset arraylen, void *array, const int *frame, void **fillvalue, bool flushtodisk)</td></tr>
<tr class="memdesc:a8e6611243431101939c4dd4c991a7e0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write one or more arrays with the same IO decomposition to the file.  <a href="#a8e6611243431101939c4dd4c991a7e0b">More...</a><br/></td></tr>
<tr class="separator:a8e6611243431101939c4dd4c991a7e0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3e7daa32e4bcbd54a1afa2508ed5f4f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio__darray_8c.html#ab3e7daa32e4bcbd54a1afa2508ed5f4f">find_var_fillvalue</a> (<a class="el" href="structfile__desc__t.html">file_desc_t</a> *file, int varid, <a class="el" href="structvar__desc__t.html">var_desc_t</a> *vdesc)</td></tr>
<tr class="memdesc:ab3e7daa32e4bcbd54a1afa2508ed5f4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the fillvalue that should be used for a variable.  <a href="#ab3e7daa32e4bcbd54a1afa2508ed5f4f">More...</a><br/></td></tr>
<tr class="separator:ab3e7daa32e4bcbd54a1afa2508ed5f4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa40fae759a2a5e39cb7af9b6f024db8f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio__darray_8c.html#aa40fae759a2a5e39cb7af9b6f024db8f">PIOc_write_darray</a> (int ncid, int varid, int ioid, PIO_Offset arraylen, void *array, void *fillvalue)</td></tr>
<tr class="memdesc:aa40fae759a2a5e39cb7af9b6f024db8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a distributed array to the output file.  <a href="#aa40fae759a2a5e39cb7af9b6f024db8f">More...</a><br/></td></tr>
<tr class="separator:aa40fae759a2a5e39cb7af9b6f024db8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4eb9375a17ec358a88c8e7e388880db"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pio__darray_8c.html#aa4eb9375a17ec358a88c8e7e388880db">PIOc_read_darray</a> (int ncid, int varid, int ioid, PIO_Offset arraylen, void *array)</td></tr>
<tr class="memdesc:aa4eb9375a17ec358a88c8e7e388880db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a field from a file to the IO library.  <a href="#aa4eb9375a17ec358a88c8e7e388880db">More...</a><br/></td></tr>
<tr class="separator:aa4eb9375a17ec358a88c8e7e388880db"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aabf3f9fc5a764a9107ad492e1559cd77"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aabf3f9fc5a764a9107ad492e1559cd77"></a>
PIO_Offset&#160;</td><td class="memItemRight" valign="bottom"><b>pio_buffer_size_limit</b> = 10485760</td></tr>
<tr class="separator:aabf3f9fc5a764a9107ad492e1559cd77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89343a92bde7994f33f1f466022fa0fc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a89343a92bde7994f33f1f466022fa0fc"></a>
PIO_Offset&#160;</td><td class="memItemRight" valign="bottom"><b>maxusage</b> = 0</td></tr>
<tr class="separator:a89343a92bde7994f33f1f466022fa0fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Public functions that read and write distributed arrays in PIO. </p>
<p>When arrays are distributed, each processor holds some of the array. Only by combining the distributed arrays from all processor can the full array be obtained.</p>
<dl class="section author"><dt>Author</dt><dd>Jim Edwards </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ab3e7daa32e4bcbd54a1afa2508ed5f4f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int find_var_fillvalue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfile__desc__t.html">file_desc_t</a> *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>varid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvar__desc__t.html">var_desc_t</a> *&#160;</td>
          <td class="paramname"><em>vdesc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the fillvalue that should be used for a variable. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>Info about file we are writing to. </td></tr>
    <tr><td class="paramname">varid</td><td>the variable ID. </td></tr>
    <tr><td class="paramname">vdesc</td><td>pointer to <a class="el" href="structvar__desc__t.html" title="Variable description structure. ">var_desc_t</a> info for this var. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, non-zero error code for failure.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Ed Hartnett </dd></dl>

</div>
</div>
<a class="anchor" id="aa4eb9375a17ec358a88c8e7e388880db"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PIOc_read_darray </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>varid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ioid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PIO_Offset&#160;</td>
          <td class="paramname"><em>arraylen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>array</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a field from a file to the IO library. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid</td><td>identifies the netCDF file </td></tr>
    <tr><td class="paramname">varid</td><td>the variable ID to be read </td></tr>
    <tr><td class="paramname">ioid</td><td>the I/O description ID as passed back by <a class="el" href="group___p_i_o__initdecomp.html#ga56c119d47d1082df044968f80acbe265" title="Initialize the decomposition used with distributed arrays. ">PIOc_InitDecomp()</a>. </td></tr>
    <tr><td class="paramname">arraylen</td><td>the length of the array to be read. This is the length of the distrubited array. That is, the length of the portion of the data that is on the processor. </td></tr>
    <tr><td class="paramname">array</td><td>pointer to the data to be read. This is a pointer to the distributed portion of the array that is on this processor. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, error code otherwise.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Jim Edwards, Ed Hartnett </dd></dl>

</div>
</div>
<a class="anchor" id="a391b1ef1811260306b599b5bcc680a52"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIO_Offset PIOc_set_buffer_size_limit </td>
          <td>(</td>
          <td class="paramtype">PIO_Offset&#160;</td>
          <td class="paramname"><em>limit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the PIO IO node data buffer size limit. </p>
<p>The pio_buffer_size_limit will only apply to files opened after the setting is changed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">limit</td><td>the size of the buffer on the IO nodes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The previous limit setting. </dd></dl>

</div>
</div>
<a class="anchor" id="aa40fae759a2a5e39cb7af9b6f024db8f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PIOc_write_darray </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>varid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ioid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PIO_Offset&#160;</td>
          <td class="paramname"><em>arraylen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>fillvalue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a distributed array to the output file. </p>
<p>This routine aggregates output on the compute nodes and only sends it to the IO nodes when the compute buffer is full or when a flush is triggered.</p>
<p>Internally, this function will: </p>
<ul>
<li>
Locate info about this file, decomposition, and variable. </li>
<li>
If we don't have a fillvalue for this variable, determine one and remember it for future calls. </li>
<li>
Initialize or find the multi_buffer for this record/var. </li>
<li>
Find out how much free space is available in the multi buffer and flush if needed. </li>
<li>
Store the new user data in the mutli buffer. </li>
<li>
If needed (only for subset rearranger), fill in gaps in data with fillvalue. </li>
<li>
Remember the frame value (i.e. record number) of this data if there is one. </li>
</ul>
<p>NOTE: The write multi buffer <a class="el" href="structwmulti__buffer.html" title="The multi buffer holds data from one or more variables. ">wmulti_buffer</a> is the cache on compute nodes that will collect and store multiple variables before sending them to the io nodes. Aggregating variables in this way leads to a considerable savings in communication expense. Variables in the wmb array must have the same decomposition and base data size and we also need to keep track of whether each is a recordvar (has an unlimited dimension) or not.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid</td><td>the ncid of the open netCDF file. </td></tr>
    <tr><td class="paramname">varid</td><td>the ID of the variable that these data will be written to. </td></tr>
    <tr><td class="paramname">ioid</td><td>the I/O description ID as passed back by <a class="el" href="group___p_i_o__initdecomp.html#ga56c119d47d1082df044968f80acbe265" title="Initialize the decomposition used with distributed arrays. ">PIOc_InitDecomp()</a>. </td></tr>
    <tr><td class="paramname">arraylen</td><td>the length of the array to be written. This should be at least the length of the local component of the distrubited array. (Any values beyond length of the local component will be ignored.) </td></tr>
    <tr><td class="paramname">array</td><td>pointer to an array of length arraylen with the data to be written. This is a pointer to the distributed portion of the array that is on this task. </td></tr>
    <tr><td class="paramname">fillvalue</td><td>pointer to the fill value to be used for missing data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, non-zero error code for failure.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Jim Edwards, Ed Hartnett </dd></dl>

</div>
</div>
<a class="anchor" id="a8e6611243431101939c4dd4c991a7e0b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PIOc_write_darray_multi </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int *&#160;</td>
          <td class="paramname"><em>varids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ioid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nvars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PIO_Offset&#160;</td>
          <td class="paramname"><em>arraylen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int *&#160;</td>
          <td class="paramname"><em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>fillvalue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>flushtodisk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write one or more arrays with the same IO decomposition to the file. </p>
<p>This funciton is similar to <a class="el" href="pio__darray_8c.html#aa40fae759a2a5e39cb7af9b6f024db8f" title="Write a distributed array to the output file. ">PIOc_write_darray()</a>, but allows the caller to use their own data buffering (instead of using the buffering implemented in <a class="el" href="pio__darray_8c.html#aa40fae759a2a5e39cb7af9b6f024db8f" title="Write a distributed array to the output file. ">PIOc_write_darray()</a>).</p>
<p>When the user calls <a class="el" href="pio__darray_8c.html#aa40fae759a2a5e39cb7af9b6f024db8f" title="Write a distributed array to the output file. ">PIOc_write_darray()</a> one or more times, then PIO_write_darray_multi() will be called when the buffer is flushed.</p>
<p>Internally, this function will: </p>
<ul>
<li>
Find info about file, decomposition, and variable. </li>
<li>
Do a special flush for pnetcdf if needed. </li>
<li>
Allocates a buffer big enough to hold all the data in the multi-buffer, for all tasks. </li>
<li>
Calls <a class="el" href="pio__internal_8h.html#a2cf6663a5359e57a8e9afc9b9b25a3f3" title="Moves data from compute tasks to IO tasks. ">rearrange_comp2io()</a> to move data from compute to IO tasks. </li>
<li>
For parallel iotypes (pnetcdf and netCDF-4 parallel) call pio_write_darray_multi_nc(). </li>
<li>
For serial iotypes (netcdf classic and netCDF-4 serial) call <a class="el" href="pio__darray__int_8c.html#a41c45f0b205bcef5184404ac50567feb" title="Write a set of one or more aggregated arrays to output file in serial mode. ">write_darray_multi_serial()</a>. </li>
<li>
For subset rearranger, create holegrid to write missing data. Then call pio_write_darray_multi_nc() or <a class="el" href="pio__darray__int_8c.html#a41c45f0b205bcef5184404ac50567feb" title="Write a set of one or more aggregated arrays to output file in serial mode. ">write_darray_multi_serial()</a> to write the holegrid. </li>
<li>
Special buffer flush for pnetcdf. </li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid</td><td>identifies the netCDF file. </td></tr>
    <tr><td class="paramname">varids</td><td>an array of length nvars containing the variable ids to be written. </td></tr>
    <tr><td class="paramname">ioid</td><td>the I/O description ID as passed back by <a class="el" href="group___p_i_o__initdecomp.html#ga56c119d47d1082df044968f80acbe265" title="Initialize the decomposition used with distributed arrays. ">PIOc_InitDecomp()</a>. </td></tr>
    <tr><td class="paramname">nvars</td><td>the number of variables to be written with this call. </td></tr>
    <tr><td class="paramname">arraylen</td><td>the length of the array to be written. This is the length of the distrubited array. That is, the length of the portion of the data that is on the processor. The same arraylen is used for all variables in the call. </td></tr>
    <tr><td class="paramname">array</td><td>pointer to the data to be written. This is a pointer to an array of arrays with the distributed portion of the array that is on this processor. There are nvars arrays of data, and each array of data contains one record worth of data for that variable. </td></tr>
    <tr><td class="paramname">frame</td><td>an array of length nvars with the frame or record dimension for each of the nvars variables in IOBUF. NULL if this iodesc contains non-record vars. </td></tr>
    <tr><td class="paramname">fillvalue</td><td>pointer an array (of length nvars) of pointers to the fill value to be used for missing data. </td></tr>
    <tr><td class="paramname">flushtodisk</td><td>non-zero to cause buffers to be flushed to disk. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, error code otherwise.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Jim Edwards, Ed Hartnett </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Aug 22 2019 11:11:12 for PIO by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
